<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Micropolis: Bug List</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="bug">Bug List </a></h1><a class="anchor" name="_bug000004"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#70a6ef5ee8b7f5f28dbf3f77d8f8b069">Micropolis::generateMap</a> () </dt>
<dd>We use a random number generator to draw a seed for initializing the random number generator? </dd>
</dl>
<p>
<a class="anchor" name="_bug000005"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#d68f2b89e42e2db02f8e9c449076fb8f">Micropolis::treeSplash</a> (short xloc, short yloc) </dt>
<dd>Function generates trees even if <a class="el" href="classMicropolis.html#28d7aa7f68c95733931bd958637d70dc">Micropolis::terrainTreeLevel</a> is 0. </dd>
</dl>
<p>
<a class="anchor" name="_bug000002"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#d7c2148ccca8aaebdf48916a37174527">Micropolis::loadCity</a> (const char *filename) </dt>
<dd>Function fails if <code>lastDot&lt;lastSlash</code> (ie with <code>"x.y/bla"</code> ) </dd>
</dl>
<p>
<a class="anchor" name="_bug000003"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#e5b7e3f82e0ce4b2fd2d136b8827631b">Micropolis::saveCityAs</a> (const char *filename) </dt>
<dd>Function fails if <code>lastDot&lt;lastSlash</code> (ie with <code>"x.y/bla"</code> ) </dd>
</dl>
<p>
<a class="anchor" name="_bug000006"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#ad789494442a575766252284bab57a35">Micropolis::simRandom</a> () </dt>
<dd>Code seems to assume that <code>sizeof(short)==2</code> and <code>sizeof(int)==4</code> However, this depends on the compiler. We should introduce typedefs for them, and check correctness of our assumptions w.r.t. size of them (eg in <a class="el" href="classMicropolis.html#9e1e857339c8bee18e8f366665149dc1">Micropolis::randomlySeedRandom()</a> or in <a class="el" href="classMicropolis.html#3c573ff6e69acab2df75d014da91688e">Micropolis::Micropolis()</a>). </dd>
</dl>
<p>
<a class="anchor" name="_bug000006"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#ad789494442a575766252284bab57a35">Micropolis::simRandom</a> () </dt>
<dd>Code stores unsigned 16 bit numbers in <code>short</code> which is a signed type. </dd>
</dl>
<p>
<a class="anchor" name="_bug000008"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#5db230dbb510ee57bedcfb1f92ff74eb">Micropolis::getRandom</a> (short range) </dt>
<dd>Increment may cause range overflow. </dd>
</dl>
<p>
<a class="anchor" name="_bug000009"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#0af844ac499e46bcba45f60bbbe7af7f">Micropolis::getResource</a> (const char *name, Quad id) </dt>
<dd>Function is not safely handling strings. </dd>
</dl>
<p>
<a class="anchor" name="_bug000009"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#0af844ac499e46bcba45f60bbbe7af7f">Micropolis::getResource</a> (const char *name, Quad id) </dt>
<dd>File handling is not safe across platforms (text-mode may modify data). </dd>
</dl>
<p>
<a class="anchor" name="_bug000009"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#0af844ac499e46bcba45f60bbbe7af7f">Micropolis::getResource</a> (const char *name, Quad id) </dt>
<dd>Not safe! </dd>
</dl>
<p>
<a class="anchor" name="_bug000009"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#0af844ac499e46bcba45f60bbbe7af7f">Micropolis::getResource</a> (const char *name, Quad id) </dt>
<dd>Not safe (overflow, non-printable chars) </dd>
</dl>
<p>
<a class="anchor" name="_bug000013"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#23423a100e7230874dcf2bdc0db178a2">Micropolis::getIndString</a> (char *str, int id, short num) </dt>
<dd>Make the function safe (should never overwrite data outside <em>str</em>, handle case where last line of file is not terminated with new-line) </dd>
</dl>
<p>
<a class="anchor" name="_bug000013"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#23423a100e7230874dcf2bdc0db178a2">Micropolis::getIndString</a> (char *str, int id, short num) </dt>
<dd>Out of range <em>num</em> seems not correctly handled (<code>strcpy</code>(str,"Oops") is overwritten at least. Maybe use an <code>assert()</code> instead?). </dd>
</dl>
<p>
<a class="anchor" name="_bug000017"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#ea06620c11f0488fa190bc5ecd048d39">Micropolis::updateFundEffects</a> () </dt>
<dd>I think this should be called after loading a city, or any time anything it depends on changes. </dd>
</dl>
<p>
<a class="anchor" name="_bug000015"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#78a28a803fc10d992196950f9caea3e5">Micropolis::collectTax</a> () </dt>
<dd>Function seems to be doing different things depending on <a class="el" href="classMicropolis.html#9a031709dddb583f85715eb66c454bc9">Micropolis::totalPop</a> value. With an non-empty city it does fund calculations. For an empty city, it immediately sets effects of funding, which seems inconsistent at least, and may be wrong </dd>
</dl>
<p>
<a class="anchor" name="_bug000015"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#78a28a803fc10d992196950f9caea3e5">Micropolis::collectTax</a> () </dt>
<dd>If <a class="el" href="classMicropolis.html#23430576d8ae376fd0cc217b9c829d1b">Micropolis::taxFlag</a> is set, no variable is touched which seems non-robust at least </dd>
</dl>
<p>
<a class="anchor" name="_bug000018"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#4929db3f8bb84bec029f7e1f99e42765">Micropolis::getDir</a> (int orgX, int orgY, int desX, int desY) </dt>
<dd>Has a condition that never holds. </dd>
</dl>
<p>
<a class="anchor" name="_bug000019"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#3a752188c5dbf468c68c8840a6224d90">Micropolis::tickCount</a> () </dt>
<dd>Unix version looks wrong, <code>time.tv_usec</code> should be divided to get seconds or <code>time.tc_sec</code> should be multiplied. </dd>
</dl>
<p>
<a class="anchor" name="_bug000020"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#e6757b7bf600d652c86a4903bdbcf8e4">Micropolis::doPlayNewCity</a> () </dt>
<dd>Function is never called. </dd>
</dl>
<p>
<a class="anchor" name="_bug000021"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#37285dd324f6f25c0f2bf15839f4bbc0">Micropolis::doReallyStartGame</a> () </dt>
<dd>Function is never called. </dd>
</dl>
<p>
<a class="anchor" name="_bug000022"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#289475ea691b0f57032c3470f3d85e92">Micropolis::doStartLoad</a> () </dt>
<dd>Function is never called. </dd>
</dl>
<p>
<a class="anchor" name="_bug000023"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#d2f8e0155dad6cf825e59fa6f83a5559">Micropolis::doStartScenario</a> (int scenario) </dt>
<dd>Function is never called. </dd>
</dl>
<p>
<a class="anchor" name="_bug000025"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#d214ca1411ed3057300176c0c4c8985b">Micropolis::bulldozerTool</a> (short x, short y, <a class="el" href="classToolEffects.html">ToolEffects</a> *effects) </dt>
<dd>Tool does not return TOOLRESULT_NO_MONEY. </dd>
</dl>
<p>
<a class="anchor" name="_bug000025"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#d214ca1411ed3057300176c0c4c8985b">Micropolis::bulldozerTool</a> (short x, short y, <a class="el" href="classToolEffects.html">ToolEffects</a> *effects) </dt>
<dd>Sometimes we can delete parts of a residential zone, but not always. Decide what rule we should have, and fix accordingly.<p>
</dd>
</dl>
<p>
<a class="anchor" name="_bug000024"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#108f15f1291408139c0fcbf198c22410">Micropolis::doZoneStatus</a> (short mapH, short mapV) </dt>
<dd>Program breaks for status on 'dirt' </dd>
</dl>
<p>
<a class="anchor" name="_bug000027"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#315c6cca38c43a717c8bdd084d159fda">Micropolis::tryDrive</a> (const <a class="el" href="classPosition.html">Position</a> &amp;startPos, ZoneType destZone) </dt>
<dd>The stack is popped, but position (and dirLast) is not updated. </dd>
</dl>
<p>
<a class="anchor" name="_bug000028"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#f36815c0343c5c02116c381135ee1578">Micropolis::updateDate</a> () </dt>
<dd>Message is wrong. </dd>
</dl>
<p>
<a class="anchor" name="_bug000029"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#741facc00e6117d20ef366b348f50e5b">Micropolis::zonePlop</a> (const <a class="el" href="classPosition.html">Position</a> &amp;pos, int base) </dt>
<dd>This function allows partial on-map construction. Is that intentional? No! </dd>
</dl>
<p>
<a class="anchor" name="_bug000030"></a> <dl>
<dt>Member <a class="el" href="classMicropolis.html#302f5202df5d21e213279ba0f005a43f">Micropolis::buildHouse</a> (const <a class="el" href="classPosition.html">Position</a> &amp;pos, int value) </dt>
<dd>score is never 0 !! </dd>
</dl>
<p>
<a class="anchor" name="_bug000001"></a> <dl>
<dt>Member <a class="el" href="animate_8cpp.html#7bfcc782d7176786fdf072aa7269baec">animatedTiles</a>  </dt>
<dd>Tile 620 points to 852. That should be tile 621.<p>
</dd>
</dl>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Feb 2 09:19:22 2011 for Micropolis by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
