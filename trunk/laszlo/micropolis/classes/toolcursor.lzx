<library>


    <!-- Tool Cursor -->
    <!-- Written for Micropolis -->
    <!-- By Don Hopkins -->
    <!-- Licensed under GPLv3 -->


    <class name="toolcursor"
	width="${(this.tileSize * this.tiles) + (2 * this.margin)}"
	height="${(this.tileSize * this.tiles) + (2 * this.margin)}"
	x="${((this.tileCursorX - this.hotSpot) * this.tileSize) - this.margin}"
	y="${((this.tileCursorY - this.hotSpot) * this.tileSize) - this.margin}"
	opacity="${this.inBounds ? 1.0 : 0.5}"
    >


        <attribute name="margin" value="5"/>
        <attribute name="cursorX" value="0"/>
        <attribute name="cursorY" value="0"/>
        <attribute name="tileCursorX" value="0"/>
        <attribute name="tileCursorY" value="0"/>
        <attribute name="tileSize" value="32"/>
        <attribute name="tiles" value="${this.toolInfo[gApp.tool]['tiles']}"/>
        <attribute name="hotSpot" value="${this.toolInfo[gApp.tool]['hotSpot']}"/>
	<attribute name="inBounds" value="${
	    (this.tileCursorX &gt;= 0) &amp;&amp;
	    (this.tileCursorY &gt;= 0) &amp;&amp;
	    (this.tileCursorX &lt; gApp.worldCols) &amp;&amp;
	    (this.tileCursorY &lt; gApp.worldRows)
	}"/>
	<attribute name="toolInfo" value="$once{{
	    residential: {
	        name: 'Residential',
	        tiles: 3,
		hotSpot: 1,
		cost: 100
	    },
	    commercial: {
	        name: 'Commercial',
	        tiles: 3,
		hotSpot: 1,
		cost: 100
	    },
	    industrial: {
                name: 'Industrial',
	        tiles: 3,
		hotSpot: 1,
		cost: 100
	    },
	    firestation: {
                name: 'Fire Station',
	        tiles: 3,
		hotSpot: 1,
		cost: 500
	    },
	    query: {
                name: 'Query',
	        tiles: 1,
		hotSpot: 0,
		cost: 0
	    },
	    policestation: {
                name: 'Police Station',
	        tiles: 3,
		hotSpot: 1,
		cost: 100
	    },
	    wire: {
                name: 'Wire',
	        tiles: 1,
		hotSpot: 0,
		cost: 5
	    },
	    bulldozer: {
                name: 'Bulldozer',
	        tiles: 1,
		hotSpot: 0,
		cost: 1
	    },
	    railroad: {
                name: 'Railroad',
	        tiles: 1,
		hotSpot: 0,
		cost: 20
	    },
	    road: {
                name: 'Road',
	        tiles: 1,
		hotSpot: 0,
		cost: 10
	    },
	    pan: {
                name: 'Pan',
	        tiles: 0,
		hotSpot: 0,
		cost: 0
	    },
	    stadium: {
                name: 'Stadium',
	        tiles: 4,
		hotSpot: 1,
		cost: 5000
	    },
	    park: {
                name: 'Park',
	        tiles: 1,
		hotSpot: 0,
		cost: 10
	    },
	    seaport: {
                name: 'Seaport',
	        tiles: 4,
		hotSpot: 1,
		cost: 3000
	    },
	    coalpower: {
                name: 'Coal Power',
	        tiles: 4,
		hotSpot: 1,
		cost: 3000
	    },
	    airport: {
                name: 'Airport',
	        tiles: 6,
		hotSpot: 1,
		cost: 10000
	    },
	    nuclearpower: {
                name: 'Nuclear Power',
	        tiles: 4,
		hotSpot: 1,
		cost: 5000
	    }
	}}"/>


	<handler name="oninit"><![CDATA[
	    //Debug.write("==== toolcursor oninit", this);
	  ]]>
	</handler>


	<handler name="ontool" reference="gApp"><![CDATA[
	    var tiles = this.toolInfo[gApp.tool]['tiles'];
	    this.setAttribute("tiles", tiles);
	  ]]>
	</handler>


	<view
	    x="0"
	    y="0"
	    width="${parent.margin}"
	    height="${parent.height}"
	    bgcolor="0x000000"
	    opacity="0.75"
	/>


	<view
	    x="${parent.width - parent.margin}"
	    y="0"
	    width="${parent.margin}"
	    height="${parent.height}"
	    bgcolor="0x000000"
	    opacity="0.75"
	/>


	<view
	    x="${parent.margin}"
	    y="0"
	    width="${parent.width - (2 * parent.margin)}"
	    height="${parent.margin}"
	    bgcolor="0x000000"
	    opacity="0.75"
	/>


	<view
	    x="${parent.margin}"
	    y="${parent.height - parent.margin}"
	    width="${parent.width - (2 * parent.margin)}"
	    height="${parent.margin}"
	    bgcolor="0x000000"
	    opacity="0.75"
	/>

	<view
	    x="${parent.margin}"
	    y="${parent.margin}"
	    width="${parent.width - (2 * parent.margin)}"
	    height="${parent.height - (2 * parent.margin)}"
	    bgcolor="0xffff00"
	    opacity="0.5"
	/>

	<text name="toolName"
	  x="${(parent.width - this.width) / 2}"
	  y="${parent.height}"
	  bgcolor="0xffffff"
	  fgcolor="0x000000"
	  fontsize="18"
	  fontstyle="bold"
	  resize="true"
	  text="${parent.toolInfo[gApp.tool]['name']}"
	/>

	<text name="toolCost"
	  x="${(parent.width - this.width) / 2}"
	  y="${parent.toolName.y + parent.toolName.height}"
	  bgcolor="0xffffff"
	  fgcolor="0x000000"
	  fontsize="18"
	  fontstyle="bold"
	  resize="true"
	  text="${gApp.formatFunds(parent.toolInfo[gApp.tool]['cost'])}"
	/>

    </class>


</library>
