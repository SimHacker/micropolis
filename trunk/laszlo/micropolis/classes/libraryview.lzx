<library>


    <!-- Library View -->
    <!-- Written for Micropolis -->
    <!-- By Don Hopkins -->
    <!-- Licensed under GPLv3 -->


    <class name="libraryview"
	clip="true"
    >


	<attribute name="active" value="true"/>


	<handler name="onactive" args="arg"><![CDATA[
	    //Debug.write("onactive", this.active, this);
	  ]]>
	</handler>


	<list
	    x="0"
	    y="0"
	    width="${parent.width}"
	    height="${parent.height}"
	    fontsize="18"
	    fontstyle="bold"
	>

	    <textlistitem
		datapath="ds_cities:/cities/city"
		onclick="this.loadCity()"
		text="${this.cityName}"
		height="28"
	    >

		<attribute name="cityID" value="$path{'@id'}"/>
		<attribute name="cityName" value="$path{'@name'}"/>

		<method name="loadCity"><![CDATA[
		    gApp.sendMessage({
		        message: 'loadCity',
			city: this.cityID
		    });
		    gApp.setAttribute("title", "Loaded Map: " + this.text);
		    gApp.setAttribute("description", "Loaded a map from the library: " + this.text);
		  ]]>
		</method>

	    </textlistitem>

	</list>


    </class>


</library>
